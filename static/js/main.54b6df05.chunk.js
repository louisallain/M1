(this.webpackJsonpcyberkey_admin_app=this.webpackJsonpcyberkey_admin_app||[]).push([[0],{44:function(e,t,n){e.exports=n(78)},49:function(e,t,n){},50:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(4),o=n.n(r),c=(n(49),n(8)),i=n(9),u=n(11),l=n(10),d=(n(50),n(26)),v=n.n(d);v.a.initializeApp({apiKey:"AIzaSyC6kPaCF2EsVck5p0qE1rPmRzz6HA414fA",authDomain:"gestionnairesallesparempreinte.firebaseapp.com",databaseURL:"https://gestionnairesallesparempreinte.firebaseio.com",projectId:"gestionnairesallesparempreinte",storageBucket:"gestionnairesallesparempreinte.appspot.com",messagingSenderId:"623460427677",appId:"1:623460427677:web:0a3c55934f7515f09bf174"});var f=v.a.database(),h=v.a.auth(),m=(n(61),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleLoginButton=function(){f.ref("admin_email").once("value",(function(e){a.state.email===e.val()?h.signInWithEmailAndPassword(a.state.email,a.state.passwordText).catch((function(e){console.error(e),"auth/wrong-password"===e.code&&window.alert("Mauvais mot de passe !")})):window.alert("Seule l'adresse mail de l'utilisateur peut \xeatre utilis\xe9 pour se connecter \xe0 cette application.")}))},a.handleResetAdminPassword=function(){f.ref("admin_email").once("value",(function(e){h.sendPasswordResetEmail(e.val()).then((function(){alert("Un email de r\xe9initialisation de mot de passe a \xe9t\xe9 envoy\xe9 \xe0 l'adresse mail de l'administrateur.")})).catch((function(e){return console.error(e)}))}))},a.state={email:"",passwordText:""},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"loginContainer"},s.a.createElement("h1",{className:"appTitle"},"Application d'administration de CyberKey"),s.a.createElement("form",{className:"loginForm",action:""},s.a.createElement("input",{type:"text",name:"email",placeholder:"Admin email",onChange:function(t){return e.setState({email:t.target.value})}}),s.a.createElement("input",{type:"password",name:"password",placeholder:"Mot de passe",onChange:function(t){return e.setState({passwordText:t.target.value})}})),s.a.createElement("button",{className:"validateButton",onClick:this.handleLoginButton},"Valider"),s.a.createElement("button",{className:"validateButton",onClick:this.handleResetAdminPassword},"R\xe9initialiser mot de passe"))}}]),n}(s.a.Component)),p=n(41),E=(n(62),n(42)),g=n(21),b=n(31),S=n.n(b),O=(n(66),n(79)),D=n(32),C=n.n(D),w=(n(20),n(33),function(e,t,n,a){return t<0&&(t=e.length+t)<0&&(t=0),e.slice(0,t)+(a||"")+e.slice(t+n)}),F=function(e,t){var n=function(e){var t=w(e,4,0,"-");return t=w(t,7,0,"-"),t=w(t,13,0,":"),t=w(t,16,0,":")},a=e.split(/BEGIN:VEVENT/g).slice(1),s=[];return a.map((function(e){var t=e.match(/DTSTART:.+\r\n/g)[0].replace(/DTSTART:/g,"").replace(/[\r\n]/g,"");t=n(t);var a=e.match(/DTEND:.+\r\n/g)[0].replace(/DTEND:/g,"").replace(/[\r\n]/g,"");a=n(a);var r=e.match(/DESCRIPTION:.+\r\n/g)[0].replace(/DESCRIPTION:/g,"").match(/\\n/g).length>4;s.push({title:e.match(/SUMMARY:.+\r\n/g)[0].replace(/SUMMARY:/g,"").replace(/[\r\n]/g,""),start:new Date(t),end:new Date(a),isCourse:r})})),s},y=n(18),N=(n(75),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props.items.map((function(t,n){return s.a.createElement(R,{key:t.id,item:t,index:n,removeItem:e.props.removeItem,validateItem:e.props.validateItem,hasValidateButton:e.props.hasValidateButton})}));return s.a.createElement("ul",{className:"list-group"}," ",t," ")}}]),n}(s.a.Component)),R=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).onClickClose=a.onClickClose.bind(Object(y.a)(a)),a.onClickDone=a.onClickDone.bind(Object(y.a)(a)),a}return Object(i.a)(n,[{key:"onClickClose",value:function(){var e=parseInt(this.props.index),t=this.props.item;this.props.removeItem(e,t)}},{key:"onClickDone",value:function(){var e=parseInt(this.props.index),t=this.props.item;this.props.validateItem(e,t)}},{key:"render",value:function(){return s.a.createElement("li",{className:"list-group-item "},this.props.hasValidateButton&&s.a.createElement("button",{type:"button",title:"Valider",className:"item-button item-button-validate",onClick:this.onClickDone},"\u2713"),s.a.createElement("button",{type:"button",title:"Supprimer",className:"item-button item-button-remove",onClick:this.onClickClose},"X"),this.props.item.id)}}]),n}(s.a.Component),T=(n(76),n(77),"PREV"),A="NEXT",j="TODAY",k=Object(g.c)(S.a),B=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).navigate=function(t){e.props.onNavigate(t)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.localizer.messages,e.label);return s.a.createElement("div",{className:"rbc-toolbar"},s.a.createElement("span",{className:"rbc-btn-group"},s.a.createElement("button",{type:"button",onClick:this.navigate.bind(null,T)},"Pr\xe9c\xe9dent"),s.a.createElement("button",{type:"button",onClick:this.navigate.bind(null,j)},"Aujourd'hui"),s.a.createElement("button",{type:"button",onClick:this.navigate.bind(null,A)},"Suivant")),s.a.createElement("span",{className:"rbc-toolbar-label"},t),this.props.changesSaved?s.a.createElement("button",{type:"button",disabled:!0,style:{backgroundColor:"grey"}},"Sauvegard\xe9 !"):s.a.createElement("button",{type:"button",style:{backgroundColor:"#4CAF50"},onClick:this.props.saveEventsOnDB},"Sauvegarder"),s.a.createElement("span",{className:"rbc-btn-group"},s.a.createElement("button",{type:"button",onClick:this.props.downloadJSONEvents},"T\xe9l\xe9charger les cr\xe9neaux"),s.a.createElement("button",{type:"button",onClick:this.props.openJSONLoadModal},"Charger des cr\xe9neaux")))}}]),n}(s.a.Component);function M(e){return e.event.isCourse?s.a.createElement("div",{className:"customEventContainer",title:"Cours d\xe9fini par ADE !"},s.a.createElement("p",{className:"eventInfos courseInfos"},e.event.title)):s.a.createElement("div",{className:"customEventContainer",title:"Double cliquer pour plus d'infos"},s.a.createElement("p",{className:"eventInfos"},e.event.title,s.a.createElement("br",null),e.usersAcceptedForThisEvent.length," acc\xe8s",s.a.createElement("br",null),e.usersRequestForThisEvent.length," demandes"),s.a.createElement("button",{className:"deleteEventButton",title:"Supprimer ce cr\xe9neau",onClick:function(){return e.deleteEvent(e.event)}},"X"))}var U=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;Object(c.a)(this,n),(a=t.call(this,e)).componentWillUnmount=function(){!1===a.state.changesSaved&&(window.confirm("Voulez vous enregistrer les changements apport\xe9s aux cr\xe9neaux ?")&&a.saveEventsOnDB())},a.handleOpenLoadJSONModal=function(){a.setState({showLoadJSONModal:!0})},a.handleCloseLoadJSONModal=function(){a.setState({showLoadJSONModal:!1})},a.addEvent=function(e,t){var n=e.start,s=e.end;n=new Date(n),(s=new Date(n)).setMinutes(n.getMinutes()+a.state.slotLengthChosen);var r=!(a.state.events.filter((function(e){return n>=e.start&&n<e.end||s>e.start&&s<=e.end})).length>0);if(n.getHours()>=a.state.beginningOfTheDay.getHours()&&s.getHours()<=a.state.endOfTheDay.getHours())if(r){a.setState({events:[].concat(Object(E.a)(a.state.events),[{id:Object(O.a)(),start:n,end:s,title:"CyberLab dispo"}]),changesSaved:!1})}else t&&alert("Un autre cr\xe9neau existe d\xe9j\xe0 \xe0 ce moment.");else t&&alert("Restez dans les limites de la journ\xe9e.")},a.handleRemoveEvent=function(e){window.confirm("Supprimer le cr\xe9neau ?")&&a.setState({events:a.state.events.filter((function(t){return t.id!==e.id})),changesSaved:!1})},a.handleShowMoreOfTheEvent=function(e){e.isCourse||a.setState({showShowMoreForEventModal:!0,usersOfTheSelectedEvent:Object.values(a.props.users).filter((function(e){return e.acceptedForEvents})).filter((function(t){return t.acceptedForEvents.includes(e.id)})),usersRequestOfTheSelectedEvent:Object.values(a.props.users).filter((function(e){return e.requestForEvents})).filter((function(t){return t.requestForEvents.includes(e.id)})),selectedEvent:e})},a.handleCloseShowMoreOfEventModal=function(){a.setState({showShowMoreForEventModal:!1})},a.handleSubmitJSONEventsFile=function(e){e.preventDefault(),a.JSONEventsFileInput.current.files[0]?a.fileReader.readAsText(a.JSONEventsFileInput.current.files[0]):alert("S\xe9lectionner un fichier d'abord.")},a.downloadJSONEvents=function(){f.ref("events").once("value",(function(e){console.log(e.val()),function(e,t){var n=document.createElement("a"),a=new Blob([e],{type:"text/plain"});n.href=URL.createObjectURL(a),n.download=t,n.click()}(e.val(),"creneaux.json")}),(function(e){return console.error(e)}))},a.saveEventsOnDB=function(){f.ref("events").set(JSON.stringify(a.state.events),(function(e){e?(console.log(e),alert(e)):(a.props.matchUsersStateByExistingEventsOnDB(a.state.events),a.setState({changesSaved:!0}),alert("Changements sauvegard\xe9s !"))}))},a.handleDenyUserAccess=function(e,t){a.props.denieAcessForThisUser(e,t,a.state.selectedEvent,(function(){a.setState({usersOfTheSelectedEvent:a.state.usersOfTheSelectedEvent.filter((function(e){return e.id!==t.id}))})}))},a.handleRejectUserRequestAccess=function(e,t){a.props.rejectRequestAccessForThisUser(e,t,a.state.selectedEvent,(function(){a.setState({usersRequestOfTheSelectedEvent:a.state.usersRequestOfTheSelectedEvent.filter((function(e){return e.id!==t.id}))})}))},a.handleAcceptUserRequestAccess=function(e,t){var n=a.state.usersOfTheSelectedEvent;n.push(t),a.props.acceptRequestAccesForThisUser(e,t,a.state.selectedEvent,(function(){a.setState({usersOfTheSelectedEvent:n,usersRequestOfTheSelectedEvent:a.state.usersRequestOfTheSelectedEvent.filter((function(e){return e.id!==t.id}))})}))},a.JSONEventsFileInput=s.a.createRef(),a.keepExistingEventsCheckbox=s.a.createRef(),a.fileReader=new FileReader;var r=a.props.ADEevents.filter((function(e){return 1==e.isCourse}));return a.props.events.map((function(e){var t=new Date(e.start),n=new Date(e.end);0===a.props.ADEevents.filter((function(e){return 1==e.isCourse})).filter((function(e){var a=new Date(e.start),s=new Date(e.end);return a>=t&&a<=n||s<=n&&s>=t})).length&&r.push(e)})),a.state={ADEevents:a.props.ADEevents,events:r,dayLayoutAlgorithm:"no-overlap",slotLengthCalendar:30,slotLengthChosen:90,beginningOfTheDay:new Date(1970,1,1,8,0,0),endOfTheDay:new Date(1970,1,1,19,30,0),showLoadJSONModal:!1,changesSaved:!0,showShowMoreForEventModal:!1,usersOfTheSelectedEvent:[],usersRequestOfTheSelectedEvent:[],selectedEvent:null},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.fileReader.onload=function(t){try{!1===e.keepExistingEventsCheckbox.current.checked&&e.setState({events:[]}),JSON.parse(t.target.result).forEach((function(t){t.start=new Date(t.start),t.end=new Date(t.end),e.addEvent(t,!1)})),e.handleCloseLoadJSONModal()}catch(n){console.log(n),alert("Veuillez respecter le format des cr\xe9neaux suivant : {start: instanceOf(Date), end: instanceOf(Date)}")}},window.onbeforeunload=function(t){if(!e.state.changesSaved)return"Les changements sur les cr\xe9neaux ne sont pas sauvegard\xe9s, \xeates vous s\xfbr de vouloir quitter la page ?"}}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"calendarContainer"},s.a.createElement(C.a,{isOpen:this.state.showLoadJSONModal,contentLabel:"Load JSON custom events",className:"modal loadJSONModal"},s.a.createElement("button",{className:"closeJSONModal",onClick:this.handleCloseLoadJSONModal},"Fermer"),s.a.createElement("p",null,"Charger un fichier de cr\xe9neaux JSON contenant un tableau o\xf9 chaque \xe9l\xe9ment contient :",s.a.createElement("br",null),s.a.createElement("code",null,"start: instanceOf(Date) // d\xe9but du cr\xe9neau",s.a.createElement("br",null),"end : instanceOf(Date) // fin du cr\xe9neau",s.a.createElement("br",null)),"Les cr\xe9neaux chevauchant d'autres cr\xe9neaux ne seront pas pris en compte.",s.a.createElement("br",null)),s.a.createElement("form",{onSubmit:this.handleSubmitJSONEventsFile},s.a.createElement("label",null,"Garder les cr\xe9neaux existants",s.a.createElement("input",{type:"checkbox",name:"keepExistingEvents",ref:this.keepExistingEventsCheckbox})),s.a.createElement("br",null),s.a.createElement("input",{type:"file",accept:".json",ref:this.JSONEventsFileInput}),s.a.createElement("br",null),s.a.createElement("button",{type:"submit"},"Envoyer"))),s.a.createElement(C.a,{isOpen:this.state.showShowMoreForEventModal,contentLabel:"Show more of event",className:"modal showMoreOfTheEventModal"},s.a.createElement("div",{className:"closeShowMoreModalContainer"},s.a.createElement("button",{className:"closeShowMoreOfEventModalButton",onClick:this.handleCloseShowMoreOfEventModal},"Fermer")),s.a.createElement("div",{className:"listContainerShowMore"},this.state.usersOfTheSelectedEvent.length>0&&s.a.createElement("div",{className:"usersAcceptedListContainer"},s.a.createElement("h2",null,"Liste des utilisateurs autoris\xe9s pour ce cr\xe9neau :"),s.a.createElement(N,{items:this.state.usersOfTheSelectedEvent,removeItem:function(t,n){return e.handleDenyUserAccess(t,n)}})),this.state.usersRequestOfTheSelectedEvent.length>0&&s.a.createElement("div",{className:"userRequestListContainer"},s.a.createElement("h2",null,"Liste des utilisateurs en attentes pour ce cr\xe9neau :"),s.a.createElement(N,{items:this.state.usersRequestOfTheSelectedEvent,hasValidateButton:!0,removeItem:function(t,n){e.handleRejectUserRequestAccess(t,n)},validateItem:function(t,n){e.handleAcceptUserRequestAccess(t,n)}})))),s.a.createElement(g.a,{selectable:!0,localizer:k,events:this.state.events,defaultView:g.b.WEEK,views:[g.b.WEEK],scrollToTime:new Date(1970,1,1,6),defaultDate:new Date,onDoubleClickEvent:this.handleShowMoreOfTheEvent,onSelectSlot:function(t){return e.addEvent(t,!0)},dayLayoutAlgorithm:this.state.dayLayoutAlgorithm,step:15,timeslots:4,min:this.state.beginningOfTheDay,max:this.state.endOfTheDay,onSelecting:function(){return!1},slotPropGetter:function(e){return{className:"my_slot"}},components:{toolbar:function(t){return s.a.createElement(B,Object.assign({},t,{openJSONLoadModal:e.handleOpenLoadJSONModal,downloadJSONEvents:e.downloadJSONEvents,changesSaved:e.state.changesSaved,saveEventsOnDB:e.saveEventsOnDB}))},event:function(t){return s.a.createElement(M,Object.assign({},t,{usersAcceptedForThisEvent:Object.values(e.props.users).filter((function(e){return e.acceptedForEvents})).filter((function(e){return e.acceptedForEvents.includes(t.event.id)})),usersRequestForThisEvent:Object.values(e.props.users).filter((function(e){return e.requestForEvents})).filter((function(e){return e.requestForEvents.includes(t.event.id)})),deleteEvent:e.handleRemoveEvent}))}}}))}}]),n}(s.a.Component),q=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).retrieveADE_Events=function(){fetch("https://planning.univ-ubs.fr/jsp/custom/modules/plannings/anonymous_cal.jsp?data=8241fc3873200214b0ceef9e5de578d6e0fa50826f0818af4a82a8fde6ce3f14906f45af276f59ae8fac93f781e86152d0472efb473cb41ff4beca69cf904027c2973627c2eb073ba5b915c2167188168d3f4109b6629391").then((function(e){return e.json()})).then((function(e){a.setState({ADE_Events:F(e.contents),ADE_EventsRetrieved:!0})})).catch((function(e){return console.log(e)}))},a.retrieveUsersFromDB=function(){console.log("Retrieving users from db..."),f.ref("users").on("value",(function(e){a.setState({users:e.val(),usersRetrieved:!0})}),(function(e){console.error(e),a.setState({users:[],usersRetrieved:!1})}))},a.retrieveEventsFromDB=function(){console.log("Retrieving events from db..."),f.ref("events").on("value",(function(e){var t=JSON.parse(e.val());t.map((function(e){e.start=new Date(e.start),e.end=new Date(e.end)})),a.setState({events:t,eventsRetrieved:!0})}),(function(e){console.error(e),a.setState({events:[],eventsRetrieved:!1})}))},a.handleCalendarButton=function(){a.setState({currentPage:"calendar_page"})},a.handleWaitingForAcceptationUsersButton=function(){a.setState({currentPage:"waiting_for_accpt_users_page"})},a.handleVIPUsersButton=function(){a.setState({currentPage:"vip_users_page"})},a.handleShowAcceptedUsers=function(){a.setState({currentPage:"show_accepted_users_page"})},a.matchUsersStateByExistingEventsOnDB=function(e){for(var t=a.state.users,n=0,s=Object.entries(a.state.users);n<s.length;n++){var r=Object(p.a)(s[n],2),o=r[0],c=r[1];c.requestForEvents&&(t[o].requestForEvents=c.requestForEvents.filter((function(t){return e.flatMap((function(e){return e.id})).includes(t)}))),c.acceptedForEvents&&(t[o].acceptedForEvents=c.acceptedForEvents.filter((function(t){return e.flatMap((function(e){return e.id})).includes(t)})))}a.setState({users:t}),a.saveUsersStateOnDB()},a.saveUsersStateOnDB=function(){f.ref("users").set(a.state.users,(function(e){e?(console.log(e),alert(e)):console.log("Changes of users list saved on DB")}))},a.denieAccessForThisUser=function(e,t,n,s){var r=t.id.replace(/[.]/g,""),o=a.state.users[r];o.acceptedForEvents=o.acceptedForEvents.filter((function(e){return e!=n.id}));var c=a.state.users;c[r]=o,a.setState({users:c}),s&&s(),a.saveUsersStateOnDB()},a.rejectRequestAccessForThisUser=function(e,t,n,s){var r=t.id.replace(/[.]/g,""),o=a.state.users[r];o.requestForEvents=o.requestForEvents.filter((function(e){return e!=n.id}));var c=a.state.users;c[r]=o,a.setState({users:c}),s&&s(),a.saveUsersStateOnDB()},a.acceptRequestAccesForThisUser=function(e,t,n,s){var r=t.id.replace(/[.]/g,""),o=a.state.users[r];o.requestForEvents=o.requestForEvents.filter((function(e){return e!=n.id})),o.acceptedForEvents?o.acceptedForEvents.push(n.id):o.acceptedForEvents=[n.id];var c=a.state.users;c[r]=o,a.setState({users:c}),s&&s(),a.saveUsersStateOnDB()},a.denieVIPForThisUser=function(e,t){var n=t.id.replace(/[.]/g,""),s=a.state.users[n];s.isVIP=!1,s.requestVIP=!1;var r=a.state.users;r[n]=s,a.setState({users:r}),a.saveUsersStateOnDB()},a.authorizeVIPForThisUser=function(e,t){var n=t.id.replace(/[.]/g,""),s=a.state.users[n];s.isVIP=!0,s.requestVIP=!1;var r=a.state.users;r[n]=s,a.setState({users:r}),a.saveUsersStateOnDB()},a.state={currentPage:"calendar_page",events:[],eventsRetrieved:!1,users:[],usersRetrieved:!1,ADE_Events:null,ADE_EventsRetrieved:!1},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.retrieveEventsFromDB(),this.retrieveUsersFromDB(),this.retrieveADE_Events()}},{key:"render",value:function(){var e,t=this,n={hour:"numeric",minute:"numeric"};switch(this.state.currentPage){case"calendar_page":e=s.a.createElement(U,{ADEevents:this.state.ADE_Events,events:this.state.events,users:this.state.users,denieAcessForThisUser:this.denieAccessForThisUser,rejectRequestAccessForThisUser:this.rejectRequestAccessForThisUser,acceptRequestAccesForThisUser:this.acceptRequestAccesForThisUser,matchUsersStateByExistingEventsOnDB:this.matchUsersStateByExistingEventsOnDB});break;case"waiting_for_accpt_users_page":var a=this.state.events.filter((function(e){return Object.values(t.state.users).filter((function(e){return e.requestForEvents})).filter((function(e){return e.requestForEvents.length>0})).map((function(e){return e.requestForEvents})).flat().includes(e.id)})).map((function(e){return s.a.createElement("div",{key:Object(O.a)()},s.a.createElement("h3",null,"Cr\xe9neau du ",e.start.toLocaleDateString("fr-FR",n)," - ",e.end.toLocaleDateString("fr-FR",n)),s.a.createElement(N,{items:Object.values(t.state.users).filter((function(e){return e.requestForEvents})).filter((function(e){return e.requestForEvents.length>0})).filter((function(t){return t.requestForEvents.includes(e.id)})),removeItem:function(n,a){return t.rejectRequestAccessForThisUser(n,a,e)},validateItem:function(n,a){return t.acceptRequestAccesForThisUser(n,a,e)},hasValidateButton:!0}))}));e=s.a.createElement("div",null,s.a.createElement("h2",null,"Demandes d'acc\xe8s au CyberLab : "),a);break;case"vip_users_page":var r=s.a.createElement(N,{items:Object.values(this.state.users).filter((function(e){return!0===e.requestVIP})),removeItem:function(e,n){return t.denieVIPForThisUser(e,n)},validateItem:function(e,n){return t.authorizeVIPForThisUser(e,n)},hasValidateButton:!0}),o=s.a.createElement(N,{items:Object.values(this.state.users).filter((function(e){return!0===e.isVIP})),removeItem:function(e,n){return t.denieVIPForThisUser(e,n)}});e=s.a.createElement("div",null,s.a.createElement("h2",null,"Demandes de libre acc\xe8s au CyberLab : "),r,s.a.createElement("h2",null,"Utilisateurs en acc\xe8s libre : "),o);break;case"show_accepted_users_page":var c=this.state.events.filter((function(e){return Object.values(t.state.users).filter((function(e){return e.acceptedForEvents})).filter((function(e){return e.acceptedForEvents.length>0})).map((function(e){return e.acceptedForEvents})).flat().includes(e.id)})).map((function(e){return s.a.createElement("div",{key:Object(O.a)()},s.a.createElement("h3",null,"Cr\xe9neau du ",e.start.toLocaleDateString("fr-FR",n)," - ",e.end.toLocaleDateString("fr-FR",n)),s.a.createElement(N,{items:Object.values(t.state.users).filter((function(e){return e.acceptedForEvents})).filter((function(e){return e.acceptedForEvents.length>0})).filter((function(t){return t.acceptedForEvents.includes(e.id)})),removeItem:function(n,a){return t.denieAccessForThisUser(n,a,e)}}))}));e=s.a.createElement("div",null,s.a.createElement("h2",null,"Acc\xe8s autoris\xe9s pour le CyberLab : "),c);break;default:e=s.a.createElement("a",null,"Erreur de routage")}return s.a.createElement("div",{className:"mainContainer"},s.a.createElement("div",{className:"leftMenu"},s.a.createElement("button",{className:"leftMenuButton",onClick:this.handleCalendarButton},"Cr\xe9neaux"),s.a.createElement("button",{className:"leftMenuButton",onClick:this.handleWaitingForAcceptationUsersButton},"En attente (",Object.values(this.state.users).filter((function(e){return e.requestForEvents})).map((function(e){return e.requestForEvents})).flat().length,")"),s.a.createElement("button",{className:"leftMenuButton",onClick:this.handleVIPUsersButton},"Utilisateurs en acc\xe8s libre (",Object.values(this.state.users).filter((function(e){return!0===e.requestVIP})).length,")"),s.a.createElement("button",{className:"leftMenuButton",onClick:this.handleShowAcceptedUsers},"Utilisateurs accept\xe9s"),s.a.createElement("button",{className:"leftMenuButton",onClick:this.props.handleLogoutButton},"Se d\xe9connecter")),s.a.createElement("div",{className:"centerMain"},!0===this.state.eventsRetrieved&&!0===this.state.usersRetrieved&&!0===this.state.ADE_EventsRetrieved&&e,(!1===this.state.eventsRetrieved||!1===this.state.usersRetrieved||!1===this.state.ADE_EventsRetrieved)&&s.a.createElement("p",null,"Chargement...")))}}]),n}(s.a.Component),I=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleLogoutButton=function(){window.confirm("Voulez-vous vous d\xe9connecter ?")&&h.signOut().then((function(){return console.log("Admin disconnected")})).catch((function(e){return console.error(e)}))},a.componentDidMount=function(){h.onAuthStateChanged((function(e){e?a.setState({currentPage:"home_page",user:e}):a.setState({currentPage:"connection_page",user:null})}))},a.state={user:null,currentPage:"connection_page"},a}return Object(i.a)(n,[{key:"render",value:function(){switch(this.state.currentPage){case"connection_page":return s.a.createElement("div",null,s.a.createElement(m,null));case"home_page":return s.a.createElement("div",null,s.a.createElement(q,{user:this.state.user,handleLogoutButton:this.handleLogoutButton}));default:console.error("[MainContainer:render] System don't know what is the page to render.")}}}]),n}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.54b6df05.chunk.js.map